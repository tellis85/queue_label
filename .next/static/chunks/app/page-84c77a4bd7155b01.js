(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{1766:(e,t,a)=>{Promise.resolve().then(a.bind(a,3161))},3161:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>p});var s=a(5155),l=a(2115),r=a(991),i=a(3463),n=a(9795);function o(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,n.QP)((0,i.$)(t))}let d=r.bL;r.l9;let c=r.ZL,m=l.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,s.jsx)(r.hJ,{ref:t,className:o("fixed inset-0 z-50 bg-black/80 backdrop-blur-sm data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",a),...l})});m.displayName=r.hJ.displayName;let u=l.forwardRef((e,t)=>{let{className:a,children:l,...i}=e;return(0,s.jsxs)(c,{children:[(0,s.jsx)(m,{}),(0,s.jsx)(r.UC,{ref:t,className:o("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",a),...i,children:l})]})});u.displayName=r.UC.displayName,l.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,s.jsx)(r.hE,{ref:t,className:o("text-lg font-semibold leading-none tracking-tight",a),...l})}).displayName=r.hE.displayName,l.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,s.jsx)(r.VY,{ref:t,className:o("text-sm text-muted-foreground",a),...l})}).displayName=r.VY.displayName;var x=a(142),f=a(78),g=a.n(f);let h=()=>{let[e,t]=(0,l.useState)([]),[a,r]=(0,l.useState)(!0),[i,n]=(0,l.useState)(null),[o,c]=(0,l.useState)(""),[m,f]=(0,l.useState)(""),[h,p]=(0,l.useState)(""),[b,y]=(0,l.useState)(""),[j,v]=(0,l.useState)({}),[N,w]=(0,l.useState)(!1),[C,S]=(0,l.useState)(1),[k,z]=(0,l.useState)([]);(0,l.useEffect)(()=>{(async()=>{try{let e=await fetch("/data/Reformatted_Data.csv"),a=(await e.text()).split("\n").slice(1).filter(e=>e.trim()).map(e=>{let t=e.split(",").map(e=>e.trim());return{Brand:t[0]||"",seriesname:t[1]||"",colorcode:t[2]||"","Background Template":t[3]||"",finish:t[4]||"",colorname:t[5]||"","Color Code + Color Name":t[6]||"",nominalsize_1:t[7]||"",nominalsize_2:t[8]||"",nominalsize_3:t[9]||""}});t(a),r(!1)}catch(e){console.error("Error loading CSV:",e),n("Failed to load label data"),r(!1)}})()},[]),(0,l.useEffect)(()=>{v({})},[m]);let B=e=>{if(!e)return null;let t=e.trim();return"/templates/daltile/".concat(t)},A=t=>{let{labelConfig:a=null,scale:l=1}=t,r=a?e.find(e=>e.Brand===a.brand&&e.seriesname===a.series&&e.colorcode===a.colorCode):e.find(e=>e.Brand===o&&e.seriesname===m&&e.colorcode===h),i=r?B(r["Background Template"]):null,n=Object.entries(a?a.sizes:j).filter(e=>{let[t,a]=e;return a}).map(e=>{let[t]=e;return t}).join(", ");return(0,s.jsxs)("div",{className:"relative bg-white",style:{width:"".concat(192*l,"px"),height:"".concat(288*l,"px")},children:[i&&(0,s.jsx)("img",{src:i,alt:"Label Template",className:"w-full h-full object-contain",onError:e=>{console.error("Template load error:",i),e.currentTarget.src="/api/placeholder/192/288"}}),(0,s.jsx)("div",{style:{position:"absolute",top:"calc(2in + 0.25in)",left:0,right:0,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"flex-start",textAlign:"center"},children:r&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{style:{fontFamily:"Geometria, Arial, sans-serif",fontSize:"".concat(8*l,"px"),lineHeight:"1.2",textTransform:"uppercase",letterSpacing:"0.05em",fontWeight:"500",color:"#000000",margin:"1px 0"},children:r["Color Code + Color Name"]}),(a?a.finish:b)&&(0,s.jsx)("div",{style:{fontFamily:"Geometria, Arial, sans-serif",fontSize:"".concat(8*l,"px"),lineHeight:"1.2",textTransform:"uppercase",letterSpacing:"0.05em",fontWeight:"500",color:"#000000",margin:"1px 0"},children:a?a.finish:b}),n&&(0,s.jsx)("div",{style:{fontFamily:"Geometria, Arial, sans-serif",fontSize:"".concat(8*l,"px"),lineHeight:"1.2",textTransform:"uppercase",letterSpacing:"0.05em",fontWeight:"500",color:"#000000",margin:"1px 0"},children:n})]})})]})},E=(0,l.useMemo)(()=>[...new Set(e.map(e=>e.Brand))],[e]),F=(0,l.useMemo)(()=>o?[...new Set(e.filter(e=>e.Brand===o).map(e=>e.seriesname))]:[],[o,e]),_=(0,l.useMemo)(()=>m?[...new Set(e.filter(e=>e.Brand===o&&e.seriesname===m).map(e=>({code:e.colorcode,displayName:e["Color Code + Color Name"]})))]:[],[o,m,e]),T=(0,l.useMemo)(()=>m?[...new Set(e.filter(e=>e.Brand===o&&e.seriesname===m&&e.colorcode===h).map(e=>e.finish))].filter(e=>e&&"NULL"!==e):[],[o,m,h,e]),I=(0,l.useMemo)(()=>{if(!m)return[];let t=new Set;return e.filter(e=>e.Brand===o&&e.seriesname===m&&e.colorcode===h).forEach(e=>{["nominalsize_1","nominalsize_2","nominalsize_3"].forEach(a=>{e[a]&&""!==e[a]&&t.add(e[a])})}),Array.from(t).sort()},[o,m,h,e]),L=e=>{z(t=>t.filter((t,a)=>a!==e))},P=async()=>{let e=document.getElementById("print-layout");if(e)try{let t=await g()(e,{scale:4,useCORS:!0,logging:!1,width:1056,height:816,backgroundColor:"#ffffff",windowWidth:1056,windowHeight:816,x:0,y:0,scrollX:0,scrollY:0}),a=new x.Ay({orientation:"landscape",unit:"in",format:[11,8.5]}),s=t.toDataURL("image/png",1);a.addImage(s,"PNG",0,0,11,8.5,void 0,"FAST"),a.save("labels.pdf")}catch(e){console.error("Error generating PDF:",e),alert("Failed to generate PDF. Please try again.")}};return a?(0,s.jsx)("div",{className:"p-8 text-center",children:"Loading label data..."}):i?(0,s.jsx)("div",{className:"p-8 text-center text-red-500",children:i}):(0,s.jsxs)("div",{className:"p-6 max-w-6xl mx-auto",children:[(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Brand"}),(0,s.jsxs)("select",{className:"w-full rounded-md border border-gray-300 bg-white px-3 py-2 text-gray-900 focus:border-blue-500 focus:ring-2 focus:ring-blue-500",value:o,onChange:e=>{c(e.target.value),f(""),p(""),y(""),v({})},children:[(0,s.jsx)("option",{value:"",children:"Select Brand"}),E.map(e=>(0,s.jsx)("option",{value:e,children:e},e))]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Series"}),(0,s.jsxs)("select",{className:"w-full rounded-md border border-gray-300 bg-white px-3 py-2 text-gray-900 focus:border-blue-500 focus:ring-2 focus:ring-blue-500",value:m,onChange:e=>{f(e.target.value),p(""),y(""),v({})},disabled:!o,children:[(0,s.jsx)("option",{value:"",children:"Select Series"}),F.map(e=>(0,s.jsx)("option",{value:e,children:e},e))]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Color"}),(0,s.jsxs)("select",{className:"w-full rounded-md border border-gray-300 bg-white px-3 py-2 text-gray-900 focus:border-blue-500 focus:ring-2 focus:ring-blue-500",value:h,onChange:e=>{p(e.target.value),y("")},disabled:!m,children:[(0,s.jsx)("option",{value:"",children:"Select Color"}),_.map(e=>{let{code:t,displayName:a}=e;return(0,s.jsx)("option",{value:t,children:a},t)})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Finish"}),(0,s.jsxs)("select",{className:"w-full rounded-md border border-gray-300 bg-white px-3 py-2 text-gray-900 focus:border-blue-500 focus:ring-2 focus:ring-blue-500",value:b,onChange:e=>y(e.target.value),disabled:!h,children:[(0,s.jsx)("option",{value:"",children:"Select Finish"}),T.map(e=>(0,s.jsx)("option",{value:e,children:e},e))]})]}),I.length>0&&(0,s.jsxs)("div",{className:"mt-6",children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Available Sizes"}),(0,s.jsx)("div",{className:"space-y-2",children:I.map(e=>(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("input",{type:"checkbox",id:"size-".concat(e),className:"h-4 w-4 rounded border-gray-300 text-blue-600 focus:ring-blue-500",checked:j[e]||!1,onChange:t=>{v(a=>({...a,[e]:t.target.checked}))}}),(0,s.jsx)("label",{htmlFor:"size-".concat(e),className:"ml-2 text-sm text-gray-700",children:e})]},e))})]}),(0,s.jsxs)("div",{className:"mt-4",children:[(0,s.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Quantity (Total ",k.reduce((e,t)=>e+t.quantity,0),"/8)"]}),(0,s.jsx)("input",{type:"number",min:"1",max:"8",value:C,onChange:e=>{let t=parseInt(e.target.value);t>0&&t<=8&&S(t)},className:"w-full rounded-md border border-gray-300 bg-white px-3 py-2 text-gray-900 focus:border-blue-500 focus:ring-2 focus:ring-blue-500"})]}),(0,s.jsx)("div",{className:"mt-4",children:(0,s.jsx)("button",{className:"w-full bg-green-600 text-white py-2 px-4 rounded-md hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2",onClick:()=>{if(!h)return;if(k.reduce((e,t)=>e+t.quantity,0)+C>8){alert("Maximum of 8 labels can be added to the layout");return}let t=e.find(e=>e.Brand===o&&e.seriesname===m&&e.colorcode===h),a={brand:o,series:m,colorCode:h,finish:b,sizes:{...j},displayName:(null==t?void 0:t["Color Code + Color Name"])||h,quantity:C};z(e=>[...e,a]),c(""),f(""),p(""),y(""),v({}),S(1)},disabled:!h,children:"Add Label to Queue"})}),k.length>0&&(0,s.jsxs)("div",{className:"mt-4 border rounded-lg p-4 bg-gray-50",children:[(0,s.jsxs)("h3",{className:"text-lg font-medium mb-2",children:["Queued Labels (",k.reduce((e,t)=>e+t.quantity,0),"/8)"]}),(0,s.jsx)("div",{className:"space-y-2",children:k.map((e,t)=>(0,s.jsxs)("div",{className:"flex justify-between items-center p-2 bg-white rounded shadow-sm",children:[(0,s.jsxs)("span",{className:"text-sm",children:[e.series," - ",e.displayName," (\xd7",e.quantity,")"]}),(0,s.jsx)("button",{onClick:()=>L(t),className:"text-red-600 hover:text-red-700 text-sm px-2 py-1",children:"Remove"})]},t))})]})]}),(0,s.jsx)("div",{className:"border rounded-lg p-4 bg-white min-h-[384px] flex items-center justify-center",children:(0,s.jsx)(A,{scale:1})})]}),(0,s.jsx)(d,{open:N,onOpenChange:w,children:(0,s.jsxs)(u,{className:"max-w-[95vw] w-[95vw] max-h-[95vh] overflow-y-auto",children:[(0,s.jsx)("div",{id:"print-layout",className:"bg-white flex items-center justify-center",children:(0,s.jsx)(()=>{let e=k.flatMap(e=>Array(e.quantity).fill(e)),t=8-e.length;return(0,s.jsx)("div",{className:"bg-white",style:{width:"11in",height:"8.5in",position:"relative",display:"flex",justifyContent:"center",alignItems:"center"},children:(0,s.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(4, 2in)",gridTemplateRows:"repeat(2, 3in)",gap:"0.25in",pageBreakAfter:"always",pageBreakInside:"avoid",margin:0,padding:0},children:[e.map((e,t)=>(0,s.jsx)("div",{style:{width:"2in",height:"3in",pageBreakInside:"avoid",breakInside:"avoid"},children:(0,s.jsx)(A,{labelConfig:e,scale:1})},t)),Array.from({length:t}).map((e,t)=>(0,s.jsx)("div",{style:{width:"2in",height:"3in",pageBreakInside:"avoid",breakInside:"avoid"}},"empty-".concat(t)))]})})},{})}),(0,s.jsxs)("div",{className:"mt-4 flex justify-end gap-2",children:[(0,s.jsx)("button",{className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50",onClick:()=>w(!1),children:"Close"}),(0,s.jsx)("button",{className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-md hover:bg-blue-700",onClick:P,children:"Download PDF"})]})]})}),(0,s.jsx)("div",{className:"mt-8",children:(0,s.jsxs)("button",{className:"w-full bg-blue-600 text-white py-2 px-4 rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2",onClick:()=>w(!0),disabled:0===k.length,children:["Preview Print Layout (",k.reduce((e,t)=>e+t.quantity,0)," labels)"]})})]})};function p(){return(0,s.jsx)("main",{className:"min-h-screen p-4",children:(0,s.jsx)(h,{})})}}},e=>{var t=t=>e(e.s=t);e.O(0,[930,316,225,441,517,358],()=>t(1766)),_N_E=e.O()}]);